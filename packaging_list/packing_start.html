<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Packing List â€“ Page 1</title>
<style>
    /* Print settings for A4 landscape */

    @page {
        size: A4 landscape;
        margin: 10mm;
    }

    body {
        font-family: Arial, sans-serif;
        font-size: 10pt;
        color: #000;
        background: #fff;
        margin: 0;
    }
    .container {
        width: 100%;
        margin: 0;
        padding: 0;
    }

    @media print {
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 100%;
            max-width: none;
            margin: 0;
            padding: 0;
            min-height: 171mm;
            box-sizing: border-box;
        }
    }

    table {
        width: 100%;
        table-layout: fixed;
    }
    .header {
        border: 1px solid #000;
    }
    .header-row1 {
        display: flex;
        align-items: center;
        
        border-bottom: 1px solid #000;
    }
    .logo-box {
        border: 1px solid #000;
        margin: 6px;
        width: 20%;
        height: auto;
        
        object-fit: contain;
    }
    .address-text {
        flex: 1;
        text-align: center;
        font-size: 1.5rem;
        white-space: nowrap;
        overflow: hidden;
        align-self: end;
    }
    .header-row2 {
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-bottom: 1px solid #000;
    }
    .header-title {
        font-size: 14pt;
        font-weight: bold;
        margin: 0;
    }
    .company-address {
        position: static;
        transform: none;
        text-align: center;
        font-size: 10pt;
        white-space: nowrap;
    }
    p {
        text-align: center;
        margin: 5px 0 10px 0;
        font-size: 12pt;
    }
    .text-center { text-align: center; }
    .text-right { text-align: right; }

    /* Main item table with optimized column widths */
    .detail-table {
        width: 100%;
        border-collapse: collapse;
    }
    .detail-table th, .detail-table td {
        border: 1px solid #000;
        padding: 3px 4px;
        vertical-align: top;
    }
    .detail-table th {
        background: #f0f0f0;
        font-weight: bold;
        text-align: center;
        font-size: 9pt;
    }
    .detail-table td {
        font-size: 9pt;
    }
    .item-no { width: 6%; }
    .material-desc { width: 28%; }
    .box-no { width: 7%; }
    .qty { width: 7%; }
    .dimension { width: 22%; }
    .net-weight { width: 15%; }
    .gross-weight { width: 15%; }
    /* Three column layout for main info */
    .three-column-table {
        width: 100%;
        border-collapse: collapse;
    
    }
    .three-column-table td {
        border: 1px solid #000;
        padding: 6px;
        vertical-align: top;
    }
    .left-column {
        width: 40%;
    }
    .center-column {
        width: 35%;
    }
    .right-column {
        width: 25%;
    }
    .meta-row {
        border-bottom: 1px solid #000;
        padding: 3px 0;
        margin-bottom: 2px;
    }
    .meta-row:last-child {
        border-bottom: none;
    }
</style>
</head>
<body>
<div class="container">

    <div class="header">
        <div class="header-row1">
           
                <img src="/static/logo.jpg" class="logo-box" alt="Company Logo">
            
            <div class="address-text">
                IX 67/A, NH-66, Kodungallur, Kerala- 680668, India
            </div>
        </div>
        <div class="header-row2">
            <div class="header-title">Packing List</div>
        </div>
    </div>

<!-- Three column layout: Consignee | Exporter | Meta -->
<table class="three-column-table">
    <tr>
        <!-- Left Column: Consignee + Delivery Address -->
        <td class="left-column">
            <div style="margin-bottom: 8px;">
                <span style="font-weight:bold; text-decoration:underline;">Consignee</span><br>
                <span style="display:block; padding-left:10px; margin-top:3px;">
                    {{ consigneeAddress | replace('\n', '<br>') | safe }}<br>
                    Tax Registration Number: {{ taxNumber }}
                </span>
            </div>
            <div>
                <span style="font-weight:bold; text-decoration:underline;">Delivery Address</span><br>
                <span style="display:block; padding-left:10px; margin-top:3px;">
                    {{ deliveryAddress | replace('\n', '<br>') | safe }}
                </span>
            </div>
        </td>
        
        <!-- Center Column: Exporter -->
        <td class="center-column">
            <span style="font-weight:bold;">Exporter:</span><br>
            Zaka Controls & Devices<br>
            IX 67/A, NH-66, Kodungallur,<br>
            KERALA- 680668<br>
            INDIA<br><br>
            GST No. 32ERGPS8045J1ZD
        </td>
        
        <!-- Right Column: Meta Info -->
        <td class="right-column">
            <div class="meta-row">
                <span><strong>Date:</strong> {{ date }}</span>
            </div>
            <div class="meta-row">
                <span><strong>PO:</strong> {{ po_no }}</span>
            </div>
            <div class="meta-row">
                <span><strong>Packing List No:</strong> {{ packing_list_no }}</span>
            </div>
        </td>
    </tr>
</table>

<!-- Single horizontal row for ports/HS code/box count -->
<table class="three-column-table">
    <tr>
        <td><strong>Loading Port:</strong> {{ loding_port }}</td>
        <td><strong>Discharge Port:</strong> {{ discharge_port }}</td>
        <td><strong>HS Code:</strong> {{ hs_code }}</td>
        <td><strong>No of Boxes:</strong> {{ total_boxes }}</td>
    </tr>
</table>

    <table class="detail-table">
        <thead>
            <tr>
                <th class="item-no">PO/Item No.</th>
                <th class="material-desc">Material & Packing Description</th>
                <th class="box-no">Box No.</th>
                <th class="qty">Qty</th>
                <th class="dimension">Dimension</th>
                <th class="net-weight">Net Weight (Kg)</th>
                <th class="gross-weight">Gross Weight (Kg)</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
                {% set box_count = item.boxes | length %}
                {% set outer_loop = loop %}
                {% for box in item.boxes %}
                <tr>
                    {# Item No. and Material: Use rowspan on the first box only #}
                    {% if loop.first %}
                    <td class="item-no" rowspan="{{ box_count }}" style="vertical-align: middle;">{{ item.item_number or outer_loop.index }}</td>
                    <td class="material-desc" rowspan="{{ box_count }}" style="vertical-align: middle;">{{ item.material }},{{ item.description }}</td>
                    {% endif %}

                    {# Box-specific details (always rendered) #}
                    <td class="box-no text-center">{{ box.boxNo }}</td>
                    <td class="qty text-center">{{ box.quantity }}</td>
                    <td class="dimension text-center">{{ box.l }} (L) x {{ box.w }} (W) x {{ box.h }} (H) cm</td>
                    <td class="net-weight text-center">{{ box.netWeight }}</td>
                    <td class="gross-weight text-center">{{ box.grossWeight }}</td>
                </tr>
                {% endfor %}
            {% endfor %}

            {# Total Row with proper alignment #}
            <tr style="font-weight: bold; background-color: #f5f5f5;">
                <td colspan="5" style="text-align: left; padding-left: 10px;">Total</td>
                <td class="text-right">{{ total_net_weight }}</td>
                <td class="text-right">{{ total_gross_weight }}</td>
            </tr>
        </tbody>
    </table>

   

   

</div>
</body>
</html>